## 1. Docker compose로 mongoDB replicaSet 설치하기
### 1.1 레플리카셋 스크립트를 돌릴 mongodb_repl_setup:latest서버 이미지 만들기

#### 1.1.1 Dockerfile 파일을 만들어 아래와 내용 쓰기
```Docker
FROM mongo
#RUN 
RUN mkdir -p /usr/src/configs
WORKDIR /usr/src/configs
COPY replicaSet.js .
#COPY setup.sh .

#CMD ["./setup.sh"]
CMD ["mongo", "mongodb://mongo1:27017", "replicaSet.js"]
```
#### 1.1.2 Dockerfile 빌드해서 이미지 파일 생성
```bash
$ docker build -t mongodb_repl_setup:latest .
```
#### 1.2 docker-compose.yml파일 생성하기

#### 1.2.1 docker-compose.yml 파일 생성해서 아래 내용 입력
```yml
version: "3"
services:
    mongo1:
        image: "mongo"
        ports:
            - "27017:27017"
        volumes:
            - /mongoRepl/mongo1:/data/db
        networks:
            - mongo-networks
        command: mongod --replSet myapp --bind_ip_all

    mongo2:
        image: "mongo"
        ports:
            - "37017:27017"
        volumes: 
            - /mongoRepl/mongo2:/data/db
        depends_on: 
            - mongo1
        networks:
            - mongo-networks
        command: mongod --replSet myapp --bind_ip_all

    mongo3:
        image: "mongo"
        ports:
            - "47017:27017"
        volumes: 
            - /mongoRepl/mongo3:/data/db
        depends_on: 
            - mongo2
        networks:
            - mongo-networks
        command: mongod --replSet myapp --bind_ip_all

    mongo_setup:
        #build: . 
        image: "mongodb_repl_setup:latest"
        ports:
            - "57017:27017"
        depends_on: 
            - mongo3
        networks:
            - mongo-networks
networks:
    mongo-networks:
        driver: bridge

```
#### 1.2.2 파일 내용 설명
띄어쓰기 등 맞지 않으면 에러나니 오타 확인 필수!
```
services:
    #컨테이너 이름 
    mongo1:
        #컨테이너에 설치할 기본 이미지 파일
        image: "mongo"
        ports:
            - "27017:27017"
        volumes:
            - /mongoRepl/mongo1:/data/db
        networks:
            - mongo-networks
        command: mongod --replSet myapp --bind_ip_all
```


